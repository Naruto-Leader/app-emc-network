import{ag as y,ap as P,aC as l,ay as m,aM as e,cb as A,aE as p,aF as f,aU as v,az as x,aA as I,aD as q,ax as F,am as n,an as B,aT as de,af as ue,aX as V,aY as j,fG as re,aj as K,aG as X,c8 as J,fs as Q,ch as _e,bR as pe,aV as H,cl as ve,au as ge,aH as me}from"./index-45cc9017.js";import{N as he,a as fe,b as ye,c as be,d as xe,e as W,u as we,f as $e,h as ke}from"./index-034b9e72.js";import{N as O}from"./text-d64a6c33.js";import{f as L}from"./format-number-243ea052.js";import{N as Se}from"./Dropdown-d2794922.js";import{N as Z}from"./Pagination-ad420a31.js";import"./use-merged-state-864545a8.js";import"./Popover-b1cb2cfb.js";import"./use-keyboard-d337ca82.js";import"./create-957127bb.js";import"./create-ref-setter-f485918b.js";import"./Input-8aaaff31.js";import"./Select-248a18ef.js";import"./FocusDetector-3f2dd1b3.js";const Ne="/assets/icon_check-ba1e345b.svg",ee="/assets/icon_computer-51bd5805.svg",Ce={class:"item"},Fe={class:"item-row"},ze={class:"item-row"},Ie={key:1,class:"item-data"},De={class:"item-icon"},Te=["src"],Ae=y({__name:"basic-simple",props:{title:String,unit:String,value:String,tips:String,iconBgColor:String,icon:String,loading:Boolean,size:{type:String,default:"normal"}},setup(t){const i=t,o=P(()=>{const a={fontSize:"16px"};return i.size==="small"&&(a.fontSize="14px"),a}),d=P(()=>{const a={fontSize:"28px"};return i.size==="small"&&(a.fontSize="24px"),a}),c=P(()=>{const a={fontSize:"16px"};return i.size==="small"&&(a.fontSize="12px"),a});return(a,s)=>(l(),m("div",Ce,[e("div",Fe,[e("span",{class:"item-title",style:A(o.value)},p(t.title),5)]),e("div",ze,[t.loading?(l(),f(v(he),{key:0,height:"28",width:56,size:"small"})):(l(),m("div",Ie,[x(v(O),{class:"item-data-value",style:A(d.value)},{default:I(()=>[q(p(t.value),1)]),_:1},8,["style"]),x(v(O),{class:"item-data-unit",style:A(c.value)},{default:I(()=>[q("Â "+p(t.unit),1)]),_:1},8,["style"])])),e("div",De,[e("img",{class:"item-icon-img",src:t.icon},null,8,Te)])])]))}});const M=F(Ae,[["__scopeId","data-v-e61cfd54"]]),Be=y({__name:"node-computing",setup(t){const i=n("Computing Nodes"),o=n(""),d=n(""),c=n(""),a=n(!1);return B(async()=>{a.value=!0;const s=await fe({page:1,size:1});a.value=!1,console.info(`computed node ${s.total}`),o.value=L(s.total||0)}),(s,_)=>(l(),f(M,{title:i.value,unit:d.value,value:o.value,tips:c.value,loading:a.value,icon:v(ee),"icon-bg-color":"#402F4A3D"},null,8,["title","unit","value","tips","loading","icon"]))}}),te="/assets/icon_validator-66802b51.svg",Ve=y({__name:"node-validate",setup(t){const i=n("Validation Nodes"),o=n(""),d=n(""),c=n(""),a=n(!1);return B(async()=>{a.value=!0;const s=await ye({page:1,size:1});a.value=!1,o.value=L(s.total||0)}),(s,_)=>(l(),f(M,{title:i.value,unit:d.value,value:o.value,tips:c.value,loading:a.value,icon:v(te),"icon-bg-color":"#2F454A3D"},null,8,["title","unit","value","tips","loading","icon"]))}}),se="/assets/icon_rpc-505ac2e1.svg",je=y({__name:"node-rpc",setup(t){const i=n("RPC Nodes"),o=n(""),d=n(""),c=n(""),a=n(!1);return B(async()=>{a.value=!0;const s=await be({page:1,size:1});a.value=!1,o.value=L(s.total||0)}),(s,_)=>(l(),f(M,{title:i.value,unit:d.value,value:o.value,tips:c.value,loading:a.value,icon:v(se),"icon-bg-color":"#2F4A3D3D"},null,8,["title","unit","value","tips","loading","icon"]))}}),ae="/assets/icon_relay-a33f2ce5.svg",Pe=y({__name:"node-relay",setup(t){const i=n("Relay Nodes"),o=n(""),d=n(""),c=n(""),a=n(!1);return B(async()=>{a.value=!0;const s=await xe({page:1,size:1});a.value=!1,o.value=L(s.total||0)}),(s,_)=>(l(),f(M,{title:i.value,unit:d.value,value:o.value,tips:c.value,loading:a.value,icon:v(ae),"icon-bg-color":"#4A462F3D"},null,8,["title","unit","value","tips","loading","icon"]))}}),Le={class:"bg"},Me=y({__name:"index",setup(t){return(i,o)=>(l(),m("div",Le,[de(i.$slots,"default",{},void 0,!0)]))}});const Re=F(Me,[["__scopeId","data-v-f4224c73"]]),Ue="/assets/icon_filter-cddb06c4.svg",Ee="/assets/icon_arrow_down-577fd25d.svg",oe=t=>(V("data-v-532b995f"),t=t(),j(),t),Ge={class:"filter"},Ye=oe(()=>e("img",{class:"filter-icon",src:Ue},null,-1)),qe={class:"filter-content"},He={class:"filter-content-text"},Oe=oe(()=>e("img",{class:"filter-menu-icon",src:Ee},null,-1)),Ke=y({__name:"filter",props:{value:{type:String}},emits:["update:value"],setup(t,{emit:i}){const o=t,d=i,c=n([]),a=n(""),{list:s,map:_}=W();function N(){const u={},w=[];return s.forEach(h=>{if(u[h.name]){const C=u[h.name];C.values.push(h.value),C.key=C.values.join(",")}else{const C={label:h.name,key:String(h.value),values:[h.value]};u[h.name]=C,w.push(C)}}),w}function T(u){const w=c.value.find(h=>h.key===u);a.value=w==null?void 0:w.label}B(()=>{if(c.value=N(),o.value)T(o.value);else{const u=c.value[0].key;d("update:value",u)}}),ue(()=>o.value,u=>{T(u||"")});function z(u){d("update:value",u)}return(u,w)=>(l(),f(v(Se),{options:c.value,size:"large",trigger:"click","node-props":()=>({class:"n-dropdown-option w-[240px] box-border"}),onSelect:z},{default:I(()=>[e("div",Ge,[Ye,e("div",qe,[e("span",He,p(a.value),1),Oe])])]),_:1},8,["options"]))}});const Xe=F(Ke,[["__scopeId","data-v-532b995f"]]),Je="/assets/icon_search_white-9c848e9c.svg",Qe="/assets/icon_close_white-ad0d8330.svg",ne=t=>(V("data-v-e29abbc8"),t=t(),j(),t),We={class:"search"},Ze=["value","disabled"],et=ne(()=>e("img",{src:Je,width:"12",height:"12"},null,-1)),tt=[et],st=ne(()=>e("img",{src:Qe,width:"12",height:"12"},null,-1)),at=[st],ot=y({__name:"search",props:{value:{type:String},showClear:{type:Boolean}},emits:["update:value","search"],setup(t,{emit:i}){const o=i;function d(_){o("update:value",_.target.value)}function c(){o("search")}function a(){o("search")}function s(){o("update:value",""),o("search")}return(_,N)=>(l(),m("div",We,[e("input",{class:"search-input",value:t.value,disabled:t.showClear,type:"text",placeholder:"Search IDs",onInput:d,onKeyup:re(c,["enter"])},null,40,Ze),t.showClear?(l(),m("div",{key:1,class:"search-icon",onClick:s},at)):(l(),m("div",{key:0,class:"search-icon",onClick:a},tt))]))}});const nt=F(ot,[["__scopeId","data-v-e29abbc8"]]),lt=t=>(V("data-v-e4ab7cbf"),t=t(),j(),t),it={class:"list"},ct={class:"m-table"},dt=_e('<div class="m-table-header" data-v-e4ab7cbf><div class="m-table-header-item w-[25%]" data-v-e4ab7cbf>Node ID</div><div class="m-table-header-item w-[15%] justify-center" data-v-e4ab7cbf>Type</div><div class="m-table-header-item w-[15%] justify-center" data-v-e4ab7cbf>CPU</div><div class="m-table-header-item w-[15%] justify-center" data-v-e4ab7cbf>GPU</div><div class="m-table-header-item w-[15%] justify-center" data-v-e4ab7cbf>RAM</div><div class="m-table-header-item w-[15%] justify-center" data-v-e4ab7cbf>Last Updated</div></div>',1),ut={class:"m-table-body"},rt={key:0,class:"m-table-row-empty"},_t={key:1,class:"m-table-row-empty"},pt=lt(()=>e("span",null,"No Data",-1)),vt=[pt],gt={class:"m-table-row-item w-[25%] text-[12px] xl:text-[14px]"},mt={class:"m-table-row-item text-[12px] xl:text-[14px] w-[15%] justify-center"},ht={class:"m-table-row-item text-[12px] xl:text-[14px] w-[15%] justify-center"},ft={class:"m-table-row-item text-[12px] xl:text-[14px] w-[15%] justify-center"},yt={class:"m-table-row-item text-[12px] xl:text-[14px] w-[15%] justify-center"},bt={class:"m-table-row-item text-[12px] xl:text-[14px] w-[15%] justify-center"},xt={class:"list-footer"},wt=y({__name:"list.desktop",props:{list:{type:Array,default:()=>[]},pageNo:{type:Number},pageCount:{type:Number},loading:{type:Boolean}},emits:["paging"],setup(t,{emit:i}){const o=i;function d(c){o("paging",c)}return(c,a)=>(l(),m("div",it,[e("div",ct,[dt,e("div",ut,[t.loading?(l(),m("div",rt,[x(v(K))])):t.list.length===0?(l(),m("div",_t,vt)):(l(!0),m(X,{key:2},J(t.list,(s,_)=>(l(),f(v(Q),{key:s._id,class:"m-table-row",to:{name:"node-detail",params:{id:s._id}}},{default:I(()=>[e("div",gt,p(s.nodeIdFormat),1),e("div",mt,[e("div",{class:"m-table-row-item-badge",style:A({color:s.type.color,backgroundColor:s.type.bgColor})},p(s.type.name),5)]),e("div",ht,p(s.cpus||"-"),1),e("div",ft,p(s.gpus||"-"),1),e("div",yt,p(s.memory||"-"),1),e("div",bt,p(s.updateTimeStr),1)]),_:2},1032,["to"]))),128))])]),e("div",xt,[x(v(Z),{page:t.pageNo,disabled:t.loading,"page-count":t.pageCount,"onUpdate:page":d,size:"large","page-slot":10},null,8,["page","disabled","page-count"])])]))}});const $t=F(wt,[["__scopeId","data-v-e4ab7cbf"]]),D=t=>(V("data-v-48b8a32d"),t=t(),j(),t),kt={class:"list"},St={class:"list-body"},Nt={key:0,class:"item-empty"},Ct={key:1,class:"item-empty"},Ft=D(()=>e("span",null,"No Data",-1)),zt=[Ft],It={class:"item-badge"},Dt=["src"],Tt={class:"item-content"},At={class:"item-row"},Bt={class:"text-[14px]"},Vt={class:"item-row"},jt={class:"badge"},Pt=D(()=>e("div",{class:"badge-label"},[e("span",null,"CPU")],-1)),Lt={class:"badge-value"},Mt=D(()=>e("span",{class:"badge-value-unit"},"cors",-1)),Rt={class:"badge"},Ut=D(()=>e("div",{class:"badge-label"},[e("span",null,"GPU")],-1)),Et={class:"badge-value"},Gt={class:"badge"},Yt=D(()=>e("div",{class:"badge-label"},[e("span",null,"RAM")],-1)),qt={class:"badge-value"},Ht=D(()=>e("span",{class:"badge-value-unit"},"GB",-1)),Ot={class:"list-footer"},Kt=y({__name:"list.mobile",props:{list:{type:Array,default:()=>[]},pageNo:{type:Number},pageCount:{type:Number},loading:{type:Boolean}},emits:["paging"],setup(t,{emit:i}){const o=i;function d(c){o("paging",c)}return(c,a)=>(l(),m("div",kt,[e("div",St,[t.loading?(l(),m("div",Nt,[x(v(K))])):t.list.length===0?(l(),m("div",Ct,zt)):(l(!0),m(X,{key:2},J(t.list,(s,_)=>(l(),f(v(Q),{key:s._id,class:"item",to:{name:"node-detail",params:{id:s._id}}},{default:I(()=>[e("div",It,[e("img",{class:"item-badge-icon",src:s.type.icon},null,8,Dt),e("span",{class:"item-badge-text",style:A({color:s.type.color})},p(s.type.name),5)]),e("div",Tt,[e("div",At,[e("span",Bt,p(s.nodeIdFormat),1)]),e("div",Vt,[e("div",jt,[Pt,e("div",Lt,[e("span",null,p(s.cpus||"-"),1),Mt])]),e("div",Rt,[Ut,e("div",Et,[e("span",null,p(s.gpus||"-"),1)])]),e("div",Gt,[Yt,e("div",qt,[e("span",null,p(s.memory||"-"),1),Ht])])])])]),_:2},1032,["to"]))),128))]),e("div",Ot,[x(v(Z),{page:t.pageNo,disabled:t.loading,"page-count":t.pageCount,"onUpdate:page":d,size:"small","page-slot":2},null,8,["page","disabled","page-count"])])]))}});const Xt=F(Kt,[["__scopeId","data-v-48b8a32d"]]),Jt=t=>(V("data-v-1411c029"),t=t(),j(),t),Qt={class:"page relative",style:{margin:"auto"}},Wt={class:"section !mb-20"},Zt={class:"grid grid-cols-2 sm:grid-cols-4 gap-[16px] sm:gap-[24px]"},es={class:"grid-cols-1 base-emc-card computing-card"},ts={class:"grid-cols-1 base-emc-card validator-card"},ss={class:"grid-cols-1 base-emc-card rpc-card"},as={class:"grid-cols-1 base-emc-card relay-card"},os={class:"section node base-emc-card"},ns={class:"node-grid"},ls=Jt(()=>e("div",{class:"node-header"},[e("div",{class:"node-header-row"},[e("span",{class:"node-title"},"Node List")]),e("div",{class:"node-header-row"},[e("img",{class:"node-subtitle-icon",src:Ne}),e("span",{class:"node-subtitle-text"},"Last 6 hours of updates")])],-1)),is={class:"node-tools"},cs=y({name:"nodes",beforeRouteEnter(t,i,o){typeof t.meta!="object"&&(t.meta={}),i.name==="node-detail"?t.meta.isBack=!0:t.meta.isBack=!1,o()}}),ds=y({...cs,setup(t){const i=ge(),o=we(),{list:d,map:c}=W(),a=P(()=>o.value?"small":"large"),s=n([]),_=n({status:"-1",keywords:""}),N=n(1),T=n(20),z=n(1),u=n(!1),w=n(""),h=n("");pe(()=>{i.meta.isBack?U():R()});function C(g){let $=c[g].name,b="",k="",S="";return g===11?(b="#1ED6FF",k="#1ED6FF1A",S=te):g===12?(b="#268AFF",k="#268AFF1A",S=se):g===13?(b="#5A3FFF",k="#5A3FFF33",S=ae):(b="#3DFFDC",k="#3DFFDC26",S=ee),{name:$,color:b,bgColor:k,icon:S}}const R=$e(async()=>{N.value=1,z.value=1,s.value=[],U()},60),U=async()=>{u.value=!0;const g=new Date().getTime(),$=g-360*6e4,b=g+60*6e4,k=_.value,S={};k.keywords?S.keywords=k.keywords:S.status=k.status==="-1"?void 0:k.status;const G=await ke({page:N.value,size:T.value,htbegin:$,htend:b,...S});u.value=!1;const Y=[];(G.list||[]).forEach(r=>{r.nodeIdFormat=H.formatAddress(r._id,11),r.updateTimeStr=ve(r.heartTime).format("YYYY-MM-DD HH:mm"),r.runTime=r.runTime===r.startupTime?"--":H.formatDate(r.runTime),r.type=C(r.status),r.gpus=r.gpus,r.cpus=r.cpus,r.memory=r.memory,Y.push(r)});const ce=G.total||0;s.value=Y,z.value=Math.ceil(ce/T.value)},E=g=>{N.value=g,U()},le=g=>{const $=_.value;$.status=g,R()},ie=()=>{const g=_.value;g.keywords=h.value,R()};return(g,$)=>(l(),f(Re,null,{default:I(()=>[e("div",Qt,[e("div",Wt,[e("div",Zt,[e("div",es,[x(Be,{size:a.value},null,8,["size"])]),e("div",ts,[x(Ve,{size:a.value},null,8,["size"])]),e("div",ss,[x(je,{size:a.value},null,8,["size"])]),e("div",as,[x(Pe,{size:a.value},null,8,["size"])])])]),e("div",os,[e("div",ns,[ls,e("div",is,[_.value.keywords?me("",!0):(l(),f(Xe,{key:0,value:w.value,"onUpdate:value":[$[0]||($[0]=b=>w.value=b),le]},null,8,["value"])),x(nt,{value:h.value,"onUpdate:value":$[1]||($[1]=b=>h.value=b),"show-clear":!!_.value.keywords,onSearch:ie},null,8,["value","show-clear"])])]),v(o)?(l(),f(Xt,{key:0,list:s.value,"page-no":N.value,"page-count":z.value,loading:u.value,onPaging:E},null,8,["list","page-no","page-count","loading"])):(l(),f($t,{key:1,list:s.value,"page-no":N.value,"page-count":z.value,loading:u.value,onPaging:E},null,8,["list","page-no","page-count","loading"]))])])]),_:1}))}});const ks=F(ds,[["__scopeId","data-v-1411c029"]]);export{ks as default};
