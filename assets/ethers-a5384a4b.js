var it=Object.defineProperty;var ct=(a,n,e)=>n in a?it(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var g=(a,n,e)=>(ct(a,typeof n!="symbol"?n+"":n,e),e),se=(a,n,e)=>{if(!n.has(a))throw TypeError("Cannot "+e)};var l=(a,n,e)=>(se(a,n,"read from private field"),e?e.call(a):n.get(a)),w=(a,n,e)=>{if(n.has(a))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(a):n.set(a,e)},p=(a,n,e,t)=>(se(a,n,"write to private field"),t?t.call(a,e):n.set(a,e),e);var Pe=(a,n,e,t)=>({set _(r){p(a,n,r,e)},get _(){return l(a,n,t)}}),S=(a,n,e)=>(se(a,n,"access private method"),e);import{cF as _e,cG as me,cH as Oe,cI as ie,cJ as ve,cK as Be,cL as Ce,cM as ge,cN as Fe,cO as d,cP as I,cQ as re,cR as E,cS as W,cT as pe,cU as Ie,cV as Ae,cW as De,cX as Ue,cY as be,cZ as Q,c_ as $e,c$ as T,d0 as ce,d1 as ut,d2 as lt,d3 as f,d4 as je,d5 as R,d6 as P,d7 as O,d8 as v,d9 as Me,da as He,db as Z,dc as Je,dd as Le,de as ye,df as Ge,dg as qe,dh as ze,di as Ve,dj as A,dk as We,dl as Ke,dm as Qe,dn as ft,dp as Ze,dq as Xe,dr as ht,ds as dt,dt as mt,du as gt,dv as pt,dw as bt,dx as yt,dy as wt,dz as kt,dA as Et,dB as Rt,dC as Tt,dD as Pt,dE as Nt,dF as St,dG as xt,dH as _t,dI as Ot,dJ as vt,dK as Bt,dL as Ct,dM as Ft,dN as It,dO as At,dP as Dt,dQ as Ut,dR as $t,dS as jt,dT as Mt,dU as Ht,dV as Jt,dW as Lt,dX as Gt,dY as qt,dZ as zt,d_ as Vt,d$ as Wt,e0 as Kt,e1 as Qt,e2 as Zt,e3 as Xt,e4 as Yt,e5 as er,e6 as tr,e7 as rr,e8 as sr,e9 as nr,ea as ar,eb as or,ec as ir,ed as cr,ee as ur,ef as lr,eg as fr,eh as hr,ei as dr,ej as mr,ek as gr,el as pr,em as br,en as yr,eo as wr,ep as kr,eq as Er,er as Rr,es as Tr,et as Pr,eu as Nr,ev as Sr,ew as xr,ex as _r,ey as Or,ez as vr,eA as Br,eB as Cr,eC as Fr,eD as Ir,eE as Ar,eF as Dr,eG as Ur,eH as $r,eI as jr,eJ as Mr,aw as Hr,eK as Jr,eL as Lr,eM as Gr,eN as qr,eO as zr,eP as Vr,eQ as Wr,eR as Kr,eS as Qr,aq as Zr,eT as Xr,eU as Yr,eV as es,eW as ts,eX as rs,eY as ss,eZ as ns,e_ as as,e$ as os,f0 as is,f1 as cs,at as us,f2 as ls,f3 as fs,f4 as hs,f5 as ds,f6 as ms,f7 as gs,f8 as ps,f9 as bs,fa as ys,fb as ws,fc as ks}from"./index-45cc9017.js";const Es=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rs=BigInt("1000000000000000000"),Ts=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ps=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),Ns=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ss(){_e.lock(),me.lock(),Oe.lock(),ie.lock(),ve.lock(),Be.lock(),Ce.lock(),ge.lock(),Fe.lock(),ie.lock()}const xs=new RegExp("^bytes([0-9]+)$"),_s=new RegExp("^(u?int)([0-9]*)$"),Os=new RegExp("^(.*)\\[([0-9]*)\\]$");function Ye(a,n,e){switch(a){case"address":return e?E(W(n,32)):E(Ie(n));case"string":return pe(n);case"bytes":return E(n);case"bool":return n=n?"0x01":"0x00",e?E(W(n,32)):E(n)}let t=a.match(_s);if(t){let r=t[1]==="int",s=parseInt(t[2]||"256");return d((!t[2]||t[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",a),e&&(s=256),r&&(n=Ae(n,s)),E(W(De(n),s/8))}if(t=a.match(xs),t){const r=parseInt(t[1]);return d(String(r)===t[1]&&r!==0&&r<=32,"invalid bytes type","type",a),d(Ue(n)===r,`invalid value for ${a}`,"value",n),e?E(be(n,32)):n}if(t=a.match(Os),t&&Array.isArray(n)){const r=t[1],s=parseInt(t[2]||String(n.length));d(s===n.length,`invalid array length for ${a}`,"value",n);const o=[];return n.forEach(function(i){o.push(Ye(r,i,!0))}),E(re(o))}d(!1,"invalid type","type",a)}function we(a,n){d(a.length===n.length,"wrong number of values; expected ${ types.length }","values",n);const e=[];return a.forEach(function(t,r){e.push(Ye(t,n[r]))}),I(re(e))}function vs(a,n){return me(we(a,n))}function Bs(a,n){return ge(we(a,n))}function Cs(a){const n=pe(a);if(n.length>31)throw new Error("bytes32 string must be less than 32 bytes");return be(n,32)}function Fs(a){const n=E(a,"bytes");if(n.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(n[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let e=31;for(;n[e-1]===0;)e--;return Q(n.slice(0,e))}class ke{constructor(n,e,t){g(this,"interface");g(this,"bytecode");g(this,"runner");const r=$e.from(n);e instanceof Uint8Array?e=I(E(e)):(typeof e=="object"&&(e=e.object),e.startsWith("0x")||(e="0x"+e),e=I(E(e))),T(this,{bytecode:e,interface:r,runner:t||null})}attach(n){return new ce(n,this.interface,this.runner)}async getDeployTransaction(...n){let e={};const t=this.interface.deploy;if(t.inputs.length+1===n.length&&(e=await ut(n.pop())),t.inputs.length!==n.length)throw new Error("incorrect number of arguments to constructor");const r=await lt(this.runner,t.inputs,n),s=re([this.bytecode,this.interface.encodeDeploy(r)]);return Object.assign({},e,{data:s})}async deploy(...n){const e=await this.getDeployTransaction(...n);f(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const t=await this.runner.sendTransaction(e),r=je(t);return new ce(r,this.interface,this.runner,t)}connect(n){return new ke(this.interface,this.bytecode,n)}static fromSolidity(n,e){d(n!=null,"bad compiler output","output",n),typeof n=="string"&&(n=JSON.parse(n));const t=n.abi;let r="";return n.bytecode?r=n.bytecode:n.evm&&n.evm.bytecode&&(r=n.evm.bytecode),new this(t,r,e)}}const L="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Is(a){switch(a){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}d(!1,"unsupported network","network",a)}class D extends R{constructor(e,t){e==null&&(e="mainnet");const r=P.from(e);t==null&&(t=L);const s={polling:!0,staticNetwork:r},o=D.getRequest(r,t);super(o,r,s);g(this,"apiKey");T(this,{apiKey:t})}_getProvider(e){try{return new D(e,this.apiKey)}catch{}return super._getProvider(e)}static getRequest(e,t){t==null&&(t=L);const r=new O(`https://${Is(e.name)}/${t}`);return r.allowGzip=!0,t===L&&(r.retryFunc=async(s,o,i)=>(v("AnkrProvider"),!0)),r}getRpcError(e,t){return e.method==="eth_sendRawTransaction"&&t&&t.error&&t.error.message==="INTERNAL_ERROR: could not replace existing tx"&&(t.error.message="replacement transaction underpriced"),super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===L}}const G="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function As(a){switch(a){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}d(!1,"unsupported network","network",a)}class U extends R{constructor(e,t){e==null&&(e="mainnet");const r=P.from(e);t==null&&(t=G);const s=U.getRequest(r,t);super(s,r,{staticNetwork:r});g(this,"apiKey");T(this,{apiKey:t})}_getProvider(e){try{return new U(e,this.apiKey)}catch{}return super._getProvider(e)}async _perform(e){if(e.method==="getTransactionResult"){const{trace:t,tx:r}=await Me({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(t==null||r==null)return null;let s,o=!1;try{s=t[0].result.output,o=t[0].error==="Reverted"}catch{}if(s)return f(!o,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:s,reason:null,transaction:r,invocation:null,revert:null}),s;f(!1,"could not parse trace result","BAD_DATA",{value:t})}return await super._perform(e)}isCommunityResource(){return this.apiKey===G}static getRequest(e,t){t==null&&(t=G);const r=new O(`https://${As(e.name)}/v2/${t}`);return r.allowGzip=!0,t===G&&(r.retryFunc=async(s,o,i)=>(v("alchemy"),!0)),r}}function q(a){switch(a){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}d(!1,"unsupported network","network",a)}function Ds(a){switch(a){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}d(!1,"unsupported network","network",a)}class $ extends R{constructor(e,t){e==null&&(e="mainnet");const r=P.from(e);t==null&&(t=q(r.name));const s=$.getRequest(r,t);super(s,r,{staticNetwork:r});g(this,"apiKey");T(this,{apiKey:t})}_getProvider(e){try{return new $(e,this.apiKey)}catch{}return super._getProvider(e)}isCommunityResource(){return this.apiKey===q(this._network.name)}static getRequest(e,t){t==null&&(t=q(e.name));const r=new O(`https://${Ds(e.name)}/${t}`);return r.allowGzip=!0,t===q(e.name)&&(r.retryFunc=async(s,o,i)=>(v("ChainstackProvider"),!0)),r}}class et extends R{constructor(n){n==null&&(n="mainnet");const e=P.from(n);d(e.name==="mainnet","unsupported network","network",n),super("https://cloudflare-eth.com/",e,{staticNetwork:e})}}const Ne=2e3;function Us(a){return a&&typeof a.then=="function"}const tt="org.ethers.plugins.provider.Etherscan";class Ee extends He{constructor(e){super(tt);g(this,"baseUrl");T(this,{baseUrl:e})}clone(){return new Ee(this.baseUrl)}}const $s=["enableCcipRead"];let js=1;var B;class rt extends Z{constructor(e,t){const r=t??null;super();g(this,"network");g(this,"apiKey");w(this,B,void 0);const s=P.from(e);p(this,B,s.getPlugin(tt)),T(this,{apiKey:r,network:s}),this.getBaseUrl()}getBaseUrl(){if(l(this,B))return l(this,B).baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}d(!1,"unsupported network","network",this.network)}getUrl(e,t){const r=Object.keys(t).reduce((o,i)=>{const c=t[i];return c!=null&&(o+=`&${i}=${c}`),o},""),s=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${e}${r}${s}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}async detectNetwork(){return this.network}async fetch(e,t,r){const s=js++,o=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:s,url:o,payload:i});const c=new O(o);c.setThrottleParams({slotInterval:1e3}),c.retryFunc=(y,h,k)=>(this.isCommunityResource()&&v("Etherscan"),Promise.resolve(!0)),c.processFunc=async(y,h)=>{const k=h.hasBody()?JSON.parse(Q(h.body)):{},Te=(typeof k.result=="string"?k.result:"").toLowerCase().indexOf("rate limit")>=0;return e==="proxy"?k&&k.status==0&&k.message=="NOTOK"&&Te&&(this.emit("debug",{action:"receiveError",id:s,reason:"proxy-NOTOK",error:k}),h.throwThrottleError(k.result,Ne)):Te&&(this.emit("debug",{action:"receiveError",id:s,reason:"null result",error:k.result}),h.throwThrottleError(k.result,Ne)),h},i&&(c.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),c.body=Object.keys(i).map(y=>`${y}=${i[y]}`).join("&"));const m=await c.send();try{m.assertOk()}catch(y){this.emit("debug",{action:"receiveError",id:s,error:y,reason:"assertOk"}),f(!1,"response error","SERVER_ERROR",{request:c,response:m})}m.hasBody()||(this.emit("debug",{action:"receiveError",id:s,error:"missing body",reason:"null body"}),f(!1,"missing response","SERVER_ERROR",{request:c,response:m}));const u=JSON.parse(Q(m.body));return e==="proxy"?(u.jsonrpc!="2.0"&&(this.emit("debug",{action:"receiveError",id:s,result:u,reason:"invalid JSON-RPC"}),f(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:c,response:m,info:{result:u}})),u.error&&(this.emit("debug",{action:"receiveError",id:s,result:u,reason:"JSON-RPC error"}),f(!1,"error response","SERVER_ERROR",{request:c,response:m,info:{result:u}})),this.emit("debug",{action:"receiveRequest",id:s,result:u}),u.result):u.status==0&&(u.message==="No records found"||u.message==="No transactions found")?(this.emit("debug",{action:"receiveRequest",id:s,result:u}),u.result):((u.status!=1||typeof u.message=="string"&&!u.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:s,result:u}),f(!1,"error response","SERVER_ERROR",{request:c,response:m,info:{result:u}})),this.emit("debug",{action:"receiveRequest",id:s,result:u}),u.result)}_getTransactionPostData(e){const t={};for(let r in e){if($s.indexOf(r)>=0||e[r]==null)continue;let s=e[r];if(!(r==="type"&&s===0)&&!(r==="blockTag"&&s==="latest")){if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r])s=Je(s);else if(r==="accessList")s="["+Le(s).map(o=>`{address:"${o.address}",storageKeys:["${o.storageKeys.join('","')}"]}`).join(",")+"]";else if(r==="blobVersionedHashes"){if(s.length===0)continue;f(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:e}})}else s=I(s);t[r]=s}}return t}_checkError(e,t,r){let s="";if(ye(t,"SERVER_ERROR")){try{s=t.info.result.error.message}catch{}if(!s)try{s=t.info.message}catch{}}if(e.method==="estimateGas"&&!s.match(/revert/i)&&s.match(/insufficient funds/i)&&f(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction}),(e.method==="call"||e.method==="estimateGas")&&s.match(/execution reverted/i)){let o="";try{o=t.info.result.error.data}catch{}const i=Ge.getBuiltinCallException(e.method,e.transaction,o);throw i.info={request:e,error:t},i}if(s&&e.method==="broadcastTransaction"){const o=qe.from(e.signedTransaction);s.match(/replacement/i)&&s.match(/underpriced/i)&&f(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:o}),s.match(/insufficient funds/)&&f(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:o}),s.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&f(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:o})}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";if(this.network.name==="optimism")return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(t=>this._checkError(e,t,e.signedTransaction));case"getBlock":if("blockTag"in e)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});f(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_call";try{return await this.fetch("proxy",t,!0)}catch(r){return this._checkError(e,r,e.transaction)}}case"estimateGas":{const t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return await this.fetch("proxy",t,!0)}catch(r){return this._checkError(e,r,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){return this.network.name!=="mainnet"?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){let t=this._getAddress(e);Us(t)&&(t=await t);try{const r=await this.fetch("contract",{action:"getabi",address:t}),s=JSON.parse(r);return new ze(t,s,this)}catch{return null}}isCommunityResource(){return this.apiKey==null}}B=new WeakMap;const z="919b412a057b5e9c9b6dce193c5a60242d6efadb";function Ms(a){switch(a){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}d(!1,"unsupported network","network",a)}class j extends R{constructor(e,t){e==null&&(e="mainnet");const r=P.from(e);t==null&&(t=z);const s=j.getRequest(r,t);super(s,r,{staticNetwork:r});g(this,"token");T(this,{token:t})}_getProvider(e){try{return new j(e,this.token)}catch{}return super._getProvider(e)}isCommunityResource(){return this.token===z}static getRequest(e,t){t==null&&(t=z);const r=new O(`https://${Ms(e.name)}/${t}`);return r.allowGzip=!0,t===z&&(r.retryFunc=async(s,o,i)=>(v("QuickNodeProvider"),!0)),r}}const Hs=BigInt("1"),Js=BigInt("2");function Ls(a){for(let n=a.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1)),t=a[n];a[n]=a[e],a[e]=t}}function Gs(a){return new Promise(n=>{setTimeout(n,a)})}function ue(){return new Date().getTime()}function ne(a){return JSON.stringify(a,(n,e)=>typeof e=="bigint"?{type:"bigint",value:e.toString()}:e)}const Se={stallTimeout:400,priority:1,weight:1},xe={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function qs(a,n){for(;(a.blockNumber<0||a.blockNumber<n)&&(a._updateNumber||(a._updateNumber=(async()=>{try{const e=await a.provider.getBlockNumber();e>a.blockNumber&&(a.blockNumber=e)}catch(e){a.blockNumber=-2,a._lastFatalError=e,a._lastFatalErrorTimestamp=ue()}a._updateNumber=null})()),await a._updateNumber,a.outOfSync++,!a._lastFatalError););}function F(a){if(a==null)return"null";if(Array.isArray(a))return"["+a.map(F).join(",")+"]";if(typeof a=="object"&&typeof a.toJSON=="function")return F(a.toJSON());switch(typeof a){case"boolean":case"symbol":return a.toString();case"bigint":case"number":return BigInt(a).toString();case"string":return JSON.stringify(a);case"object":{const n=Object.keys(a);return n.sort(),"{"+n.map(e=>`${JSON.stringify(e)}:${F(a[e])}`).join(",")+"}"}}throw console.log("Could not serialize",a),new Error("Hmm...")}function ae(a){if("error"in a){const e=a.error;return{tag:F(e),value:e}}const n=a.result;return{tag:F(n),value:n}}function K(a,n){const e=new Map;for(const{value:r,tag:s,weight:o}of n){const i=e.get(s)||{value:r,weight:0};i.weight+=o,e.set(s,i)}let t=null;for(const r of e.values())r.weight>=a&&(!t||r.weight>t.weight)&&(t=r);if(t)return t.value}function le(a,n){let e=0;const t=new Map;let r=null;const s=[];for(const{value:i,tag:c,weight:m}of n)if(i instanceof Error){const u=t.get(c)||{value:i,weight:0};u.weight+=m,t.set(c,u),(r==null||u.weight>r.weight)&&(r=u)}else s.push(BigInt(i)),e+=m;if(e<a)return r&&r.weight>=a?r.value:void 0;s.sort((i,c)=>i<c?-1:c>i?1:0);const o=Math.floor(s.length/2);return s.length%2?s[o]:(s[o-1]+s[o]+Hs)/Js}function oe(a,n){const e=K(a,n);if(e!==void 0)return e;for(const t of n)if(t.value)return t.value}function zs(a,n){if(a===1)return A(le(a,n),"%internal");const e=new Map,t=(o,i)=>{const c=e.get(o)||{result:o,weight:0};c.weight+=i,e.set(o,c)};for(const{weight:o,value:i}of n){const c=A(i);t(c-1,o),t(c,o),t(c+1,o)}let r=0,s;for(const{weight:o,result:i}of e.values())o>=a&&(o>r||s!=null&&o===r&&i>s)&&(r=o,s=i);return s}var b,N,C,Y,nt,M,fe,ee,at,te,ot,H,he;class st extends Z{constructor(e,t,r){super(t,r);w(this,Y);w(this,M);w(this,ee);w(this,te);w(this,H);g(this,"quorum");g(this,"eventQuorum");g(this,"eventWorkers");w(this,b,void 0);w(this,N,void 0);w(this,C,void 0);p(this,b,e.map(s=>s instanceof Z?Object.assign({provider:s},Se,xe):Object.assign({},Se,s,xe))),p(this,N,-2),p(this,C,null),r&&r.quorum!=null?this.quorum=r.quorum:this.quorum=Math.ceil(l(this,b).reduce((s,o)=>(s+=o.weight,s),0)/2),this.eventQuorum=1,this.eventWorkers=1,d(this.quorum<=l(this,b).reduce((s,o)=>s+o.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return l(this,b).map(e=>{const t=Object.assign({},e);for(const r in t)r[0]==="_"&&delete t[r];return t})}async _detectNetwork(){return P.from(Ve(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{const r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}async _perform(e){if(e.method==="broadcastTransaction"){const o=l(this,b).map(m=>null),i=l(this,b).map(async({provider:m,weight:u},y)=>{try{const h=await m._perform(e);o[y]=Object.assign(ae({result:h}),{weight:u})}catch(h){o[y]=Object.assign(ae({error:h}),{weight:u})}});for(;;){const m=o.filter(h=>h!=null);for(const{value:h}of m)if(!(h instanceof Error))return h;const u=K(this.quorum,o.filter(h=>h!=null));if(ye(u,"INSUFFICIENT_FUNDS"))throw u;const y=i.filter((h,k)=>o[k]==null);if(y.length===0)break;await Promise.race(y)}const c=oe(this.quorum,o);if(f(c!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:o.map(ne)}}),c instanceof Error)throw c;return c}await S(this,ee,at).call(this);const t=new Set;let r=0;for(;;){const o=S(this,M,fe).call(this,t,e);if(o==null||(r+=o.config.weight,r>=this.quorum))break}const s=await S(this,H,he).call(this,t,e);for(const o of t)o.perform&&o.result==null&&o.config.lateResponses++;return s}async destroy(){for(const{provider:e}of l(this,b))e.destroy();super.destroy()}}b=new WeakMap,N=new WeakMap,C=new WeakMap,Y=new WeakSet,nt=function(e){const t=Array.from(e).map(s=>s.config),r=l(this,b).slice();Ls(r),r.sort((s,o)=>s.priority-o.priority);for(const s of r)if(!s._lastFatalError&&t.indexOf(s)===-1)return s;return null},M=new WeakSet,fe=function(e,t){const r=S(this,Y,nt).call(this,e);if(r==null)return null;const s={config:r,result:null,didBump:!1,perform:null,staller:null},o=ue();return s.perform=(async()=>{try{r.requests++;const c=await this._translatePerform(r.provider,t);s.result={result:c}}catch(c){r.errorResponses++,s.result={error:c}}const i=ue()-o;r._totalTime+=i,r.rollingDuration=.95*r.rollingDuration+.05*i,s.perform=null})(),s.staller=(async()=>{await Gs(r.stallTimeout),s.staller=null})(),e.add(s),s},ee=new WeakSet,at=async function(){let e=l(this,C);if(!e){const t=[];l(this,b).forEach(r=>{t.push((async()=>{await qs(r,0),r._lastFatalError||(r._network=await r.provider.getNetwork())})())}),p(this,C,e=(async()=>{await Promise.all(t);let r=null;for(const s of l(this,b)){if(s._lastFatalError)continue;const o=s._network;r==null?r=o.chainId:o.chainId!==r&&f(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})())}await e},te=new WeakSet,ot=async function(e,t){const r=[];for(const s of e)if(s.result!=null){const{tag:o,value:i}=ae(s.result);r.push({tag:o,value:i,weight:s.config.weight})}if(!(r.reduce((s,o)=>s+o.weight,0)<this.quorum)){switch(t.method){case"getBlockNumber":{l(this,N)===-2&&p(this,N,Math.ceil(A(le(this.quorum,l(this,b).filter(o=>!o._lastFatalError).map(o=>({value:o.blockNumber,tag:A(o.blockNumber).toString(),weight:o.weight}))))));const s=zs(this.quorum,r);return s===void 0?void 0:(s>l(this,N)&&p(this,N,s),l(this,N))}case"getGasPrice":case"getPriorityFee":case"estimateGas":return le(this.quorum,r);case"getBlock":return"blockTag"in t&&t.blockTag==="pending"?oe(this.quorum,r):K(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return K(this.quorum,r);case"broadcastTransaction":return oe(this.quorum,r)}f(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${ne(t.method)})`})}},H=new WeakSet,he=async function(e,t){if(e.size===0)throw new Error("no runners?!");const r=[];let s=0;for(const i of e){if(i.perform&&r.push(i.perform),i.staller){r.push(i.staller);continue}i.didBump||(i.didBump=!0,s++)}const o=await S(this,te,ot).call(this,e,t);if(o!==void 0){if(o instanceof Error)throw o;return o}for(let i=0;i<s;i++)S(this,M,fe).call(this,e,t);return f(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map(i=>ne(i.result))}}),await Promise.race(r),await S(this,H,he).call(this,e,t)};function Vs(a){return a&&typeof a.send=="function"&&typeof a.close=="function"}const Ws="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function Ks(a,n){n==null&&(n={});const e=o=>n[o]==="-"?!1:typeof n.exclusive=="string"?o===n.exclusive:Array.isArray(n.exclusive)?n.exclusive.indexOf(o)!==-1:!0;if(typeof a=="string"&&a.match(/^https?:/))return new R(a);if(typeof a=="string"&&a.match(/^wss?:/)||Vs(a))return new We(a);let t=null;try{t=P.from(a)}catch{}const r=[];if(e("publicPolygon")&&t&&(t.name==="matic"?r.push(new R("https://polygon-rpc.com/",t,{staticNetwork:t})):t.name==="matic-amoy"&&r.push(new R("https://rpc-amoy.polygon.technology/",t,{staticNetwork:t}))),e("alchemy"))try{r.push(new U(a,n.alchemy))}catch{}if(e("ankr")&&n.ankr!=null)try{r.push(new D(a,n.ankr))}catch{}if(e("chainstack"))try{r.push(new $(a,n.chainstack))}catch{}if(e("cloudflare"))try{r.push(new et(a))}catch{}if(e("etherscan"))try{r.push(new rt(a,n.etherscan))}catch{}if(e("infura"))try{let o=n.infura,i;typeof o=="object"&&(i=o.projectSecret,o=o.projectId),r.push(new Ke(a,o,i))}catch{}if(e("quicknode"))try{let o=n.quicknode;r.push(new j(a,o))}catch{}if(f(r.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),r.length===1)return r[0];let s=Math.floor(r.length/2);return s>2&&(s=2),t&&Ws.indexOf(t.name)!==-1&&(s=1),n&&n.quorum&&(s=n.quorum),new st(r,void 0,{quorum:s})}var x,_;const Re=class Re extends Qe{constructor(e){super(e.provider);g(this,"signer");w(this,x,void 0);w(this,_,void 0);T(this,{signer:e}),p(this,x,null),p(this,_,0)}async getAddress(){return this.signer.getAddress()}connect(e){return new Re(this.signer.connect(e))}async getNonce(e){if(e==="pending"){l(this,x)==null&&p(this,x,super.getNonce("pending"));const t=l(this,_);return await l(this,x)+t}return super.getNonce(e)}increment(){Pe(this,_)._++}reset(){p(this,_,0),p(this,x,null)}async sendTransaction(e){const t=this.getNonce("pending");return this.increment(),e=await this.signer.populateTransaction(e),e.nonce=await t,await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}};x=new WeakMap,_=new WeakMap;let de=Re;const V="62e1ad51b37b8e00394bda3b";function Qs(a){switch(a){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}d(!1,"unsupported network","network",a)}class X extends R{constructor(e,t,r){e==null&&(e="mainnet");const s=P.from(e);t==null&&(t=V),r==null&&(r=null);const o={staticNetwork:s},i=X.getRequest(s,t,r);super(i,s,o);g(this,"applicationId");g(this,"applicationSecret");T(this,{applicationId:t,applicationSecret:r})}_getProvider(e){try{return new X(e,this.applicationId,this.applicationSecret)}catch{}return super._getProvider(e)}static getRequest(e,t,r){t==null&&(t=V);const s=new O(`https://${Qs(e.name)}/v1/lb/${t}`);return s.allowGzip=!0,r&&s.setCredentials("",r),t===V&&(s.retryFunc=async(o,i,c)=>(v("PocketProvider"),!0)),s}isCommunityResource(){return this.applicationId===V}}const Zs=void 0,Xs=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function Ys(a,n){const e=(1<<a)-1,t=[];let r=0,s=0,o=0;for(let i=0;i<n.length;i++)for(r=r<<6|Xs.indexOf(n[i]),s+=6;s>=a;){const c=r>>s-a;r&=(1<<s-a)-1,s-=a,c===0?o+=e:(t.push(c+o),o=0)}return t}function en(a,n){let e=ft(a).join(",");return n.split(/,/g).forEach(t=>{const r=t.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);d(r!==null,"internal error parsing accents","accents",n);let s=0;const o=Ys(parseInt(r[3]),r[4]),i=parseInt(r[2]),c=new RegExp(`([${r[1]}])`,"g");e=e.replace(c,(m,u)=>(--o[s]===0&&(u=String.fromCharCode(u.charCodeAt(0),i),s++),u))}),e.split(",")}var J;class tn extends Ze{constructor(e,t,r,s){super(e,t,s);w(this,J,void 0);p(this,J,r)}get _accent(){return l(this,J)}_decodeWords(){return en(this._data,this._accent)}}J=new WeakMap;const rn={en:Xe.wordlist()},an=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Ge,AbstractProvider:Z,AbstractSigner:Qe,AlchemyProvider:U,AnkrProvider:D,BaseContract:ce,BaseWallet:ht,Block:dt,BrowserProvider:mt,ChainstackProvider:$,CloudflareProvider:et,ConstructorFragment:gt,Contract:ze,ContractEventPayload:pt,ContractFactory:ke,ContractTransactionReceipt:bt,ContractTransactionResponse:yt,ContractUnknownEventPayload:wt,EnsPlugin:kt,EnsResolver:Et,ErrorDescription:Rt,ErrorFragment:Tt,EtherSymbol:Pt,EtherscanPlugin:Ee,EtherscanProvider:rt,EventFragment:Nt,EventLog:St,EventPayload:xt,FallbackFragment:_t,FallbackProvider:st,FeeData:Ot,FeeDataNetworkPlugin:vt,FetchCancelSignal:Bt,FetchRequest:O,FetchResponse:Ct,FetchUrlFeeDataNetworkPlugin:Ft,FixedNumber:It,Fragment:At,FunctionFragment:Dt,GasCostPlugin:Ut,HDNodeVoidWallet:$t,HDNodeWallet:jt,Indexed:Mt,InfuraProvider:Ke,InfuraWebSocketProvider:Ht,Interface:$e,IpcSocketProvider:Zs,JsonRpcApiProvider:Jt,JsonRpcProvider:R,JsonRpcSigner:Lt,LangEn:Xe,Log:Gt,LogDescription:qt,MaxInt256:Ns,MaxUint256:Ts,MessagePrefix:zt,MinInt256:Ps,Mnemonic:Vt,MulticoinProviderPlugin:Wt,N:Es,NamedFragment:Kt,Network:P,NetworkPlugin:He,NonceManager:de,ParamType:Qt,PocketProvider:X,QuickNodeProvider:j,Result:Zt,Signature:Xt,SigningKey:Yt,SocketBlockSubscriber:er,SocketEventSubscriber:tr,SocketPendingSubscriber:rr,SocketProvider:sr,SocketSubscriber:nr,StructFragment:ar,Transaction:qe,TransactionDescription:or,TransactionReceipt:ir,TransactionResponse:cr,Typed:ur,TypedDataEncoder:lr,UndecodedEventLog:fr,UnmanagedSubscriber:hr,Utf8ErrorFuncs:dr,VoidSigner:mr,Wallet:gr,WebSocketProvider:We,WeiPerEther:Rs,Wordlist:pr,WordlistOwl:Ze,WordlistOwlA:tn,ZeroAddress:br,ZeroHash:yr,accessListify:Le,assert:f,assertArgument:d,assertArgumentCount:wr,assertNormalize:kr,assertPrivate:Er,checkResultErrors:Rr,computeAddress:Tr,computeHmac:_e,concat:re,copyRequest:Pr,dataLength:Ue,dataSlice:Nr,decodeBase58:Sr,decodeBase64:xr,decodeBytes32String:Fs,decodeRlp:_r,decryptCrowdsaleJson:Or,decryptKeystoreJson:vr,decryptKeystoreJsonSync:Br,defaultPath:Cr,defineProperties:T,dnsEncode:Fr,encodeBase58:Ir,encodeBase64:Ar,encodeBytes32String:Cs,encodeRlp:Dr,encryptKeystoreJson:Ur,encryptKeystoreJsonSync:$r,ensNormalize:jr,formatEther:Mr,formatUnits:Hr,fromTwos:Jr,getAccountPath:Lr,getAddress:Ie,getBigInt:Ve,getBytes:E,getBytesCopy:Gr,getCreate2Address:qr,getCreateAddress:je,getDefaultProvider:Ks,getIcapAddress:zr,getIndexedAccountPath:Vr,getNumber:A,getUint:Wr,hashMessage:Kr,hexlify:I,id:Qr,isAddress:Zr,isAddressable:Xr,isBytesLike:Yr,isCallException:es,isCrowdsaleJson:ts,isError:ye,isHexString:rs,isKeystoreJson:ss,isValidName:ns,keccak256:me,lock:Ss,makeError:as,mask:os,namehash:is,parseEther:cs,parseUnits:us,pbkdf2:Oe,randomBytes:ie,recoverAddress:ls,resolveAddress:fs,resolveProperties:Me,ripemd160:ve,scrypt:Be,scryptSync:Ce,sha256:ge,sha512:Fe,showThrottleMessage:v,solidityPacked:we,solidityPackedKeccak256:vs,solidityPackedSha256:Bs,stripZerosLeft:hs,toBeArray:De,toBeHex:ds,toBigInt:ms,toNumber:gs,toQuantity:Je,toTwos:Ae,toUtf8Bytes:pe,toUtf8CodePoints:ps,toUtf8String:Q,uuidV4:bs,verifyMessage:ys,verifyTypedData:ws,version:ks,wordlists:rn,zeroPadBytes:be,zeroPadValue:W},Symbol.toStringTag,{value:"Module"}));export{an as e};
